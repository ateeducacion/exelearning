/**
 * plugin.min.js
 *
 * Released under Attribution-ShareAlike 4.0 International License.
 * Author: Ignacio Gros (http://gros.es/) for http://exelearning.net/
 *
 * License: http://creativecommons.org/licenses/by-sa/4.0/
 */

/**
 * TinyMCE plugin to add content at the end of the body outside a single div.
 * This is a workaround to be able to add content/text after a div element if there's only a single div container. 
 */
tinymce.PluginManager.add('addcontent', function(editor, url) {
	
	editor.ui.registry.addIcon('addcontent', `<?xml version="1.0" encoding="utf-8"?>
	<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
	<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
		 width="24px" height="24px" viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve">
	<desc>Created with Sketch.</desc>
	<path fill-rule="evenodd" clip-rule="evenodd" d="M5.125,4.021v9.945h6.92v4.062H9.989v-1.125H9.083v1.125H8.067v0.938h1.016v1.013
		h0.906v-1.013h2.056h0.194h0.746v-5h5.89V4.021H5.125z M17.041,12.02H6.989V5.976h10.052V12.02z"/>
	</svg>
	`);
	editor.ui.registry.addButton('addcontent', {
		tooltip: _("Add a paragraph at the end"),
		icon: "addcontent",
		// text: "AC",
		onAction: function() {
			editor.dom.add(editor.getBody(), 'p', {}, '...');
		}
	});
	
	editor.ui.registry.addMenuItem('addcontent', {
		text: _("Add a paragraph at the end"),
		icon: "addcontent",
		onAction: function() {
			editor.dom.add(editor.getBody(), 'p', {}, '...');
		}
	});
	
});