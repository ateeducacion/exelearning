/**
 * plugin.min.js
 *
 * Released under Attribution-ShareAlike 4.0 International License.
 * Author: Ignacio Gros (http://gros.es/) for http://exelearning.net/
 *
 * License: http://creativecommons.org/licenses/by-sa/4.0/
 */

/**
 * It just adds a <br style="clear:both" /> as a "clearfix" solution
 */
tinymce.PluginManager.add('clearfloat', function(editor, url) {
	
	editor.ui.registry.addIcon('clearfloat', `
	<?xml version="1.0" encoding="utf-8"?>
	<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
	<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
		 width="24px" height="24px" viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve">
	<desc>Created with Sketch.</desc>
	<g>
		<rect x="4" y="4.937" fill-rule="evenodd" clip-rule="evenodd" width="6.938" height="7.047"/>
		<g>
			<rect x="13.031" y="5.937" fill-rule="evenodd" clip-rule="evenodd" width="6.969" height="1"/>
			<rect x="13.031" y="7.96" fill-rule="evenodd" clip-rule="evenodd" width="6.969" height="1"/>
			<rect x="13.031" y="10" fill-rule="evenodd" clip-rule="evenodd" width="6.969" height="1"/>
		</g>
		<g>
			<rect x="4" y="14" fill-rule="evenodd" clip-rule="evenodd" width="6.969" height="1"/>
			<rect x="4" y="16.023" fill-rule="evenodd" clip-rule="evenodd" width="6.969" height="1"/>
			<rect x="4" y="18.062" fill-rule="evenodd" clip-rule="evenodd" width="6.969" height="1"/>
		</g>
		<polygon fill-rule="evenodd" clip-rule="evenodd" points="16.016,11.984 16.016,16.023 14.031,16.023 14.031,15 13.031,15 
			13.031,16.023 12,16.023 12,17.023 13.031,17.023 13.031,17.938 14.031,17.938 14.031,17.023 16.016,17.023 16.969,17.023 
			17.016,17.023 17.016,11.984 	"/>
	</g>
	</svg>`);

	editor.ui.registry.addToggleButton('clearfloat', {
		tooltip: _("Clear (new line or block)"),
		icon: "clearfloat",
		// text: "CF",
		onAction: function() {
			if (editor.selection.getContent()=="") {
				editor.execCommand('mceInsertContent', false, '<br style="clear:both" />', {skip_undo : 1});
			}
		}
	});
	
	editor.ui.registry.addMenuItem('clearfloat', {
		text: _("Clear (new line or block)"),
		icon: "clearfloat",
		onAction: function() {
			if (editor.selection.getContent()=="") {
				editor.execCommand('mceInsertContent', false, '<br style="clear:both">', {skip_undo : 1});
			}
		}
	});
	
});